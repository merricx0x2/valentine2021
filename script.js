var ascii_art = `██╗  ██╗ █████╗ ██████╗ ██████╗ ██╗   ██╗    ██╗   ██╗ █████╗ ██╗     ███████╗███╗   ██╗████████╗██╗███╗   ██╗███████╗
██║  ██║██╔══██╗██╔══██╗██╔══██╗╚██╗ ██╔╝    ██║   ██║██╔══██╗██║     ██╔════╝████╗  ██║╚══██╔══╝██║████╗  ██║██╔════╝
███████║███████║██████╔╝██████╔╝ ╚████╔╝     ██║   ██║███████║██║     █████╗  ██╔██╗ ██║   ██║   ██║██╔██╗ ██║█████╗  
██╔══██║██╔══██║██╔═══╝ ██╔═══╝   ╚██╔╝      ╚██╗ ██╔╝██╔══██║██║     ██╔══╝  ██║╚██╗██║   ██║   ██║██║╚██╗██║██╔══╝  
██║  ██║██║  ██║██║     ██║        ██║        ╚████╔╝ ██║  ██║███████╗███████╗██║ ╚████║   ██║   ██║██║ ╚████║███████╗
╚═╝  ╚═╝╚═╝  ╚═╝╚═╝     ╚═╝        ╚═╝         ╚═══╝  ╚═╝  ╚═╝╚══════╝╚══════╝╚═╝  ╚═══╝   ╚═╝   ╚═╝╚═╝  ╚═══╝╚══════╝
((((##(#####%%%%#%########%%#%##########(#(((((((((((((((((//////////////(*,*/*//*//////////////////////(//(/(((((((((((
((((((((##############################((((((((((((((((((//////////////*******,*,,****////////////////////(//((((((((((((
/(((((((#######(((#((##############((((((((((((/(((//(//////,*,,....,*,***********,,***,*////////////////////(((//(((/((
(//(((((((((((((((((((((#(((((((((((((((((((((((///////.,,...,,,,,,,,,,,.,.,*,,*,*,**,******///////////////////(((((((((
//////(((((((((((((((((((((((((((((((((((((///(////...,,,,,,,,*,,,,.................,,*,/******////////////////////(((/(
(////////(//(/((((((((((((((((((((((((/////(////,.,...,.*,*,****,,,,....,,........,,,,*,/**,,***/////////////////////(//
//////////////////////(/((///////////////////(.....,.,.,.,,*,**,,,.......,.................,.,,,**//////////////////////
////////////////////////////////////////////,,........,.,,,,,......................... ....,...,,,**////////////////////
/////////*//*/*/////////////////////////*/......,.....,,,,,,..,,.,............................,.,,,,*///////////////////
///////////***************/*/////***//***,.........,,*,,,,.,,,,,............. ..................,,,,*,*/////////////////
(//////******************************//........,,..,,*..,,.,,.,,,.....,.............. ............,,,****/*/////////////
#((/*//*******************************.........,.*.,.......,,,,.,,,,,.,***,,.................,.....,,,*,*////*////*/////
##((//******************************....,...... .. . .........,*.,******(((/,*,....................,,,,,**/*/**//*//////
###((//****************,,*******,,,........ .. ...............,/,(#%#%%#%%##(((/**,,.......... . ...,,,,,,**/*///*//////
....((//**********,,,,,,,,***,,,......       ..  ....,,,*/((##%%%%%%%&&&&%%%%%#/(((//*....,...  ....,,,,*,,**/***///////
.......,/************,,,,,,,,...... .      ........,*/##(%%&%&&&&&&&&&&&&&&&&&%%#%##(/**,***,,.. ..,,,,,,,,**///*/*//*//
...........*******,,,,,,,,,,.... */**(/.... .....,*(#%%&&&&&&&&&&&&&&&&&&&&%%%%%%###(((////**,.....,,,,,,.,.**/**//*////
.,.........******,,,,,,........//(#(//.  . ...,*(#%%%&&&&&&&&&&&&&&&&&&&&&&%%%%%###((((((///*,....,.,.,,..,.,**/***/////
*..,.. ....****,,,,,,,.... ....####(/     ...,(#%%&&&&&&&&&#%(##(#%&&&&&&&&%%%%%%#####(((//**,...,,....,.....,***//**///
((/**,.....*/*****,,,,.... . ..(##//...  ..,(##%%&%%%&%%%%&%&&&%%(///(#%%%%%%%%%#####(((///*,,..,...,.........,**///////
((/((/*., .///***,,,,,... ....../(,.  ...../#%%%%%&&%%%%%%%%&&&&&&&#/**//#%%%%%%#%###(((//**,... ...,..........,*///////
##(//**.*. ///****,,......I .LOVE.U  ....,((%%%&&&&&%#//**,., ..,/#%%###(/((%%%#%####((//**,... .....,..........,///////
##   ,,. . ///****,,,.,..........,. ....,((#%%&&&&&&&&&&%%#(%,.,.%#,(((##((########(///*,,,.... .........,.......*/*////
,/../(,*  .////***,,,.......  .... .,*.,/(#%%&&&&&&@@@&&&&&&%#(#####*//##%%####((//*,,....    ....,............,,.*/////
/*. /..,   ////****,,,,, ...  . ....*,,*/(##%%&&&&&@@@@@&&&&%%##((###%%%%&%%#(/*/////////*,.  ..................*..*////
/..  ,/..  ////****,. ..  .. . ... . ,,*/((#%%%&&&&&&@@@&&&&&&&&&&&&&&&&&&&%(//(*.....*............................*////
((//*/,    //*****...    ... ... ....,*/((##%%%%&&&&&&@@@&&&&&&&&&&&&&&&&&&#((((((/*//.............................,*//*
.....,.....***.... ..   ...... ... ..,*/(((##%%%%&&&&&@&@&&&&&&&&&&&&&&&&&%#((((((//**..    ........................**//
,.,,/(/,...,.... ....... ... . ...  .,**/((####%%&&&&&&&&&&&&&&%%&&&&&&&&&&#/(###((//*,... ................... .,...***/
#%&&&(#(%%/,,.,.,,,...    ......  .. .,*/((#####%%%%&&&&&&&%%%%%&&&@@@&@@&&%###%%##((/*. .............................//
&&(#((@&@%#%(,./(,..,... I.LOVE.U  .. .,*/((((###%#%%%%%%%%&&&%#%#/*#%%&&&&%#(%%%##(/*.  .......MY..PRINCESS...,*.,. ..*
#&@@@@@&#(&%//*/#(,,..  .............. .,,//(((####%%%%%%%&&&&&&&&&&%#(((//*#(%%%##(/,    .............................*
@@@&####(/&@&(#@/%%%,..  .......... .. . .***/((((####(((##%%%%&&&&&%%%#((((#####(/*.    .. ..................../......,
%%#%#%#@@#&&&@#@&&%&#*. ... ...............,,**/((((###%####(//((#%##%#(////(((/*,       .  ............. . ....,,......
//(@@@&@&&#(@@&&&&#%#/...... ............. ..,,*///((##%&&@@@@@@&@&%,*,,,*///*,          ..  ...........  ... ..,,..,...
&@@@@&(((#/#(&&#@&((&#,.........................,*%&@&&&&&%%&&&&@&&%&%*****. .            .  ................. .,*..,..,
@@@%%###%@@@@@&#&%(#*#(...........................*%#(*&&@@@@@@@@@@@&&&#..                   ......... .....   .,,..,.,,
@@%%#%%@@@@@@@@(&&(%#%,.. ..........................#%&@@@@&&&%(#%&&%%&&&%# .         .   ................... ..*,....,,
%%#%%@@@@&##@@@&/(##@%*..... .................... ,#&&&&%#(**&&@@@@@@@&&&&%%%(..   .... ..........  ......... ....,,..*,
%%%&@@@##%#%@@@%*(((&&,............ .......... . &@&&&# ,(&&@@@@@&&&%%&&&&%%&&%*    ................   ..........,...*,*
/%@@@@(%#%@@@@@%//#%@&,,.   ..... ............. .#&%/ .#%&&&&&&#&&&&@@@@@@@&&&&%%% ....................    ... ....,,,*/
#@&@%###(@@&@@%(*##@@&., .  ..... . ... ..........  .%&%&&%##@@&&&&&&&&&%&&&@@&&&&%# ..................    .. ......*/((
&@@&%%#@@@##&%(((##@@&.,  ..  . .,............. .. .&&&&%(*/#%%#(/(*/////(##%&&&&&&&# ......... .. ....    .. ..,..*..((
%@&#(&@&&(##%(&(#%&@&%... .........................  ..   *(###(#(#((((/(/(((#&&&&&&%(..   ... .. ..   .  ......,*/*/#,.
@@@#%@@%(#((@@&#%#@@/.... .........................  . ...*##%%###%#######%%(%&&@&&&%..   . ...   ..   ......*.,,.*///(/
&&&##&*(&@(@@&###%@/(,......  ...  . ........ .....  ...../#%%%%%%%%%%%%%%&&&@@@&&&%#....    .. .... ..  .....*,/((*.(((
@@###&(&&#@@@((##@@#,,..  .. .....    ....................(#%%%%%&&%%&&&%&&@@@@@&&&#......   .    .  .I.LOVE.U.,//(((/,(
@@%/#/#,*#&@###/%&//,....... .. . ... ..... ............,*/(%%%%&&%%%&&&&@@@@@@&&&%........  .    .., ...... ,,,../(/(/*
%#((&&*,@@@&#/#&&%*,,...... . .  ...... .  ....,......**..,/###%%&%%&&&&&@@@@@@&&%.   . .  ...................*.*,.,,,((
##@&((,#@@@@%@&&@(/,..*.. ...... . .   .. /,.*........,,../,*(#%%%&&&&@@@@@@@&&&%*.     ..  ...  .......,/(,(,.,,//./(%%
#%&&#,((###/((##&##*,*, ....  ......   .  *(,...,**..,(,.,,, /((#%&&&&@@@@@&&&%%#  .   . .   ... ...*//.,/#(*(*,,,*.*/#(
#@&#(&&@@@&(*###(/,,,,... . ........  . .. ...,,*,,./,.,,*,. ,((((#%%&&&&&&&%%&%( . .  .. . ..........,(.(#(/(#/,/,,(%#%
@&((&(#@@@@@&%@&&*,,,,.................. ......((,,*((#,/*... (((#(##%##%%%%&&&%. ..  .. . ..............**///*(/,/#%%%%
@#(&(((###(#@&&&%%#*,,......HAPPY.VALENTINE!..,/#//,(/*.,,....(#(###%%#%%&&&&&%(..................,.,.....*,./#(/*%%%%%%
##%#&%&&#((####(/*/,,,,........   ...........,./((/%*/*,....  (##%#%%%&&&&&&&%%#......... ..............*.,*(**#(#%%%%%%
##%*/@@@@@@@@##(/(*/.,.........  ........../(..(,./##%#%/*..../###%&&&&&&&&&&%%#......... ....../,.....,*,*(#(#%%%#%%%%%
(#,**&&&&@@@@@@@&&*,..........,..  ...........,*%,,(*./,,,.. *(###%&&&&&&&&&&&%#.. ...... ......//.....,/*,####%%%%%%%%%
                        ██╗    ██╗      ██████╗ ██╗   ██╗███████╗    ██╗   ██╗ ██████╗ ██╗   ██╗                        
                        ██║    ██║     ██╔═══██╗██║   ██║██╔════╝    ╚██╗ ██╔╝██╔═══██╗██║   ██║                        
                        ██║    ██║     ██║   ██║██║   ██║█████╗       ╚████╔╝ ██║   ██║██║   ██║                        
                        ██║    ██║     ██║   ██║╚██╗ ██╔╝██╔══╝        ╚██╔╝  ██║   ██║██║   ██║                        
                        ██║    ███████╗╚██████╔╝ ╚████╔╝ ███████╗       ██║   ╚██████╔╝╚██████╔╝                        
                        ╚═╝    ╚══════╝ ╚═════╝   ╚═══╝  ╚══════╝       ╚═╝    ╚═════╝  ╚═════╝                         
`.split("");

/**
 *  Load CSS file
 */
var cssId = 'myCss';  // you could encode the css path itself to generate id..
if (!document.getElementById(cssId))
{
    var head  = document.getElementsByTagName('head')[0];
    var link  = document.createElement('link');
    link.id   = cssId;
    link.rel  = 'stylesheet';
    link.type = 'text/css';
    link.href = 'https://merricx0x2.github.io/valentine2021/style.css';
    //link.href = 'style.css';
    link.media = 'all';
    head.appendChild(link);
}

// Love timer
var startDateTime = new Date(2018,3,9,20,00,00,0); // YYYY (M-1) D H m s ms (start time and date from DB)
var startStamp = startDateTime.getTime();

var newDate = new Date();
var newStamp = newDate.getTime();

var timer; // for storing the interval (to stop or pause later if needed)

function updateClock() {
    newDate = new Date();
    newStamp = newDate.getTime();
    var diff = Math.round((newStamp-startStamp)/1000);
    
    var Y = Math.floor(diff/(24*60*60*365));
    diff = diff-(Y*24*60*60*365);
    var M = Math.floor(diff/(24*60*60*30));
    diff = diff-(M*24*60*60*30);
    var d = Math.floor(diff/(24*60*60));
    diff = diff-(d*24*60*60);
    var h = Math.floor(diff/(60*60));
    diff = diff-(h*60*60);
    var m = Math.floor(diff/(60));
    diff = diff-(m*60);
    var s = diff;
    
    document.getElementById("timer").innerHTML = `<span class='pink'>${Y} years, ${M} months, ${d} days, ${h} hours, ${m} minutes, ${s} seconds</span>`;
}


function fadeOut(el){
    el.style.opacity = 1;

    (function fade() {
        if ((el.style.opacity -= .05) < 0) {
            el.style.display = "none";
        } else {
            requestAnimationFrame(fade);
        }
    })();
};

function fadeIn(el, display){
    el.style.opacity = 0;
    el.style.display = display || "block";

    (function fade() {
        var val = parseFloat(el.style.opacity);
        if (!((val += .05) > 1)) {
            el.style.opacity = val;
            requestAnimationFrame(fade);
        }
    })();
};

// Insert element on page load
function main(){

    var welcome = document.createElement("div");
    welcome.className = "welcome wordCarousel";
    welcome.innerHTML = `<span class="front">Hi there</span><br>
                        <span class="front2">My </span><span class="flip"><ul class="flip3">
                            <li>Fifii ❤</li>
                            <li>Love</li>
                            <li>Dearest</li>
                        </ul></span>
                        `;
    document.body.appendChild(welcome);

    /*var carousel = document.createElement("div");
    carousel.className = "carousel";
    carousel.innerHTML = `<img src="https://dummyimage.com/600x400/000/fff">`;
    document.body.appendChild(carousel);*/

    var ascii_img = document.createElement("div");
    ascii_img.className = "ascii-art";
    ascii_img.innerHTML = `<code><span class="ascii" style="color: white; background: black;
    display:inline-block;
    white-space:pre;
    letter-spacing:0;
    line-height:1.4;
    font-family:'Consolas','BitstreamVeraSansMono','CourierNew',Courier,monospace;
    font-size:6px;
    
    border-width:1px;
    border-style:solid;
    border-color:lightgray;
    "></span></code>`;
    document.body.appendChild(ascii_img);
    var code_elem = document.querySelector(".ascii-art code span");

    var i=0;
    function typeAsciiArt(){
        setTimeout(function(){
            for(var j=i; j < i+15; j++){
                if(!ascii_art[j]){
                    break;
                }
                var new_span = document.createElement("span");
                new_span.innerText = ascii_art[j];
                code_elem.appendChild(new_span);
            }
            i+=15;
            if(i < ascii_art.length){
                typeAsciiArt();
            }
        }, 0.1);
    }

    var love = document.createElement("div");
    love.className = "love hide";
    document.body.appendChild(love);

    var loveSince = document.createElement("div");
    loveSince.className = "love-since hide";
    loveSince.innerHTML = "Do you know?<br>I've loved you for:";
    var timerDiv = document.createElement("div");
    timerDiv.id = "timer";
    loveSince.appendChild(timerDiv);
    document.body.appendChild(loveSince);
    timer = setInterval(updateClock, 1000);

    var closer = document.createElement("div");
    closer.className = "closer hide";
    closer.innerHTML = `<p>I just wanna say that you're the most wonderful girl that really changed my world.<br>
    For this valentine, please kindly accept this simple gift for you.<br>I Love you so much...<3<br><br>
    Sincerely,<br>
    Your dearest<br></p>
    <button class="btn btn3">Open gift</button>`;
    document.body.appendChild(closer);

    var footer = document.createElement("div");
    footer.className = "footer";
    var btn1 = document.createElement("button");
    btn1.className = "btn btn1";
    btn1.onmouseover = function(e){
        this.innerText = "YES!";
    }
    btn1.onmouseleave = function(e){
        this.innerText = "Will you be my valentine?";
    }
    btn1.onclick = function(){
        document.querySelector(".wordCarousel").className = "hide";
        el1 = document.querySelector(".love-since");
        fadeIn(el1);
        el2 = document.querySelector(".love");
        fadeIn(el2);
        el3 = document.querySelector(".btn2");
        fadeIn(el3, 'inline-block');
        this.className = "hide";
    }
    btn1.innerText = "Will you be my valentine?";

    var btn2 = document.createElement("button");
    btn2.className = "btn btn2 hide";
    btn2.onmouseover = function(e){
        this.innerText = "Of course, I do!";
    }
    btn2.onmouseleave = function(e){
        this.innerText = "Do you love me too?";
    }
    btn2.onclick = function(){
        document.querySelector(".love-since").style = "";
        document.querySelector(".love").style = "";
        this.style = "";
        fadeIn(document.querySelector(".closer"));
    }
    btn2.innerText = "Do you love me too?";
    footer.appendChild(btn1);
    footer.appendChild(btn2);
    document.body.appendChild(footer);

    var btn3 = document.querySelector(".btn3");
    btn3.onclick = function(){
        document.querySelector(".closer").style = "";
        typeAsciiArt();
    }
};

window.addEventListener('load', function(){
    main();
})
